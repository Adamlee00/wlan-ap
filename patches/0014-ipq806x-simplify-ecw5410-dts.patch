From 1cfbebfc9cf3fea769474ab92b3ffeaf9e8a7169 Mon Sep 17 00:00:00 2001
From: John Crispin <john@phrozen.org>
Date: Thu, 17 Jun 2021 16:13:40 +0200
Subject: [PATCH] ipq806x: simplify ecw5410 dts

Signed-off-by: John Crispin <john@phrozen.org>
---
 .../arm/boot/dts/qcom-ipq8068-ecw5410.dts     | 67 ++++++++++---------
 1 file changed, 34 insertions(+), 33 deletions(-)

diff --git a/target/linux/ipq806x/files/arch/arm/boot/dts/qcom-ipq8068-ecw5410.dts b/target/linux/ipq806x/files/arch/arm/boot/dts/qcom-ipq8068-ecw5410.dts
index 712910c261..cd5255fea8 100644
--- a/target/linux/ipq806x/files/arch/arm/boot/dts/qcom-ipq8068-ecw5410.dts
+++ b/target/linux/ipq806x/files/arch/arm/boot/dts/qcom-ipq8068-ecw5410.dts
@@ -259,39 +259,6 @@
 };
 
 &soc {
-	nand@1ac00000 {
-		status = "okay";
-
-		pinctrl-0 = <&nand_pins>;
-		pinctrl-names = "default";
-
-		nand@0 {
-			compatible = "qcom,nandcs";
-
-			reg = <0>;
-
-			nand-ecc-strength = <4>;
-			nand-bus-width = <8>;
-			nand-ecc-step-size = <512>;
-
-			partitions {
-				compatible = "fixed-partitions";
-				#address-cells = <1>;
-				#size-cells = <1>;
-
-				rootfs1@0 {
-					label = "rootfs1";
-					reg = <0x0000000 0x4000000>;
-				};
-
-				rootfs2@4000000 {
-					label = "rootfs2";
-					reg = <0x4000000 0x4000000>;
-				};
-			};
-		};
-	};
-
 	mdio1: mdio {
 		compatible = "virtual,mdio-gpio";
 		#address-cells = <1>;
@@ -314,6 +281,40 @@
 	};
 };
 
+&nand_controller {
+	status = "okay";
+
+	pinctrl-0 = <&nand_pins>;
+	pinctrl-names = "default";
+
+	nand@0 {
+		compatible = "qcom,nandcs";
+
+		reg = <0>;
+
+		nand-ecc-strength = <4>;
+		nand-bus-width = <8>;
+		nand-ecc-step-size = <512>;
+
+		partitions {
+			compatible = "fixed-partitions";
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			rootfs1@0 {
+				label = "rootfs1";
+				reg = <0x0000000 0x4000000>;
+			};
+
+			rootfs2@4000000 {
+				label = "rootfs2";
+				reg = <0x4000000 0x4000000>;
+			};
+		};
+	};
+};
+
+
 &gmac2 {
 	status = "okay";
 
-- 
2.25.1

