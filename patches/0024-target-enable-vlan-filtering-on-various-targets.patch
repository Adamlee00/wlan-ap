From 8a2ba4f83554a29c954246b6586a8168560d3541 Mon Sep 17 00:00:00 2001
From: John Crispin <john@phrozen.org>
Date: Mon, 29 Mar 2021 16:05:14 +0200
Subject: [PATCH 01/11] target: enable vlan-filtering on various targets

Signed-off-by: John Crispin <john@phrozen.org>
---
 target/linux/ipq40xx/base-files/etc/board.d/02_network         | 1 +
 target/linux/mediatek/mt7622/base-files/etc/board.d/02_network | 1 +
 target/linux/ramips/mt7621/base-files/etc/board.d/02_network   | 1 +
 3 files changed, 3 insertions(+)

diff --git a/target/linux/ipq40xx/base-files/etc/board.d/02_network b/target/linux/ipq40xx/base-files/etc/board.d/02_network
index fe21dc8035..8b7364ff33 100755
--- a/target/linux/ipq40xx/base-files/etc/board.d/02_network
+++ b/target/linux/ipq40xx/base-files/etc/board.d/02_network
@@ -179,6 +179,7 @@ ipq40xx_setup_macs()
 
 board_config_update
 board=$(board_name)
+ucidef_set_bridge_device bridge
 ipq40xx_setup_interfaces $board
 ipq40xx_setup_macs $board
 board_config_flush
diff --git a/target/linux/mediatek/mt7622/base-files/etc/board.d/02_network b/target/linux/mediatek/mt7622/base-files/etc/board.d/02_network
index f1daa2fae1..fa48c4008c 100755
--- a/target/linux/mediatek/mt7622/base-files/etc/board.d/02_network
+++ b/target/linux/mediatek/mt7622/base-files/etc/board.d/02_network
@@ -30,6 +30,7 @@ mediatek_setup_interfaces()
 
 board_config_update
 board=$(board_name)
+ucidef_set_bridge_device bridge
 mediatek_setup_interfaces $board
 board_config_flush
 
diff --git a/target/linux/ramips/mt7621/base-files/etc/board.d/02_network b/target/linux/ramips/mt7621/base-files/etc/board.d/02_network
index 89e679be7c..d68abebd4f 100755
--- a/target/linux/ramips/mt7621/base-files/etc/board.d/02_network
+++ b/target/linux/ramips/mt7621/base-files/etc/board.d/02_network
@@ -148,6 +148,7 @@ ramips_setup_macs()
 
 board_config_update
 board=$(board_name)
+ucidef_set_bridge_device bridge
 ramips_setup_interfaces $board
 ramips_setup_macs $board
 board_config_flush
-- 
2.25.1

